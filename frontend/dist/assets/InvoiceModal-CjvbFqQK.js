import{P as n,j as e,n as B,c as k,r as G,by as _,S as l,B as c,T as s,e as L,ad as J,d as u,w as Q,aP as z,aM as H,b2 as K,K as U,F as P,b3 as V,U as N,aA as Y,b6 as X,aR as $,bx as Z,y as I,G as x}from"./index-BE75cmpZ.js";import{T as i}from"./TableCell-BOHhKnuh.js";import{A as ee}from"./AlertProductDelete-oTlyPibh.js";import{a as re}from"./invoice-gwlodkUv.js";import{S as se}from"./Skeleton-CpgMpkyu.js";import{I as te}from"./InputAdornment-CY-Tyt4a.js";import{a as ne}from"./react-pdf.browser-DbCEHO18.js";import{E as ae}from"./index-BwELBfiY.js";import{T as oe,a as ie,b as le}from"./TableContainer-s0yUIJEg.js";import{T as de}from"./TableHead-DpC64hQ0.js";import{T as S}from"./TableRow-D1lYbwwu.js";import{D as ce}from"./DocumentDownload-DDJvvIVF.js";function O({onEditItem:d,cellData:t}){return e.jsx(i,{sx:{"& .MuiFormHelperText-root":{position:"absolute",bottom:-24,ml:0}},children:e.jsx(B,{type:t.type,placeholder:t.placeholder,name:t.name,id:t.id,value:t.type==="number"?t.value>0?t.value:"":t.value,onChange:d,label:t.label,error:!!(t.errors&&t.touched),inputProps:{...t.type==="number"&&{min:0}}})})}O.propTypes={onEditItem:n.any,cellData:n.any};function he({id:d,name:t,description:r,qty:a,price:C,onDeleteItem:T,onEditItem:M,index:p,Blur:D,errors:f,touched:m}){var R;const{invoiceMaster:y}=re(),j=k(),b=j.palette.mode,[A,g]=G.useState(!1),F=h=>{g(!1),h&&(T(p),z({open:!0,message:"Product Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))},o=`invoice_detail[${p}].name`,w=_(m,o),W=_(f,o),q=[{placeholder:"Item name",label:"Item Name",name:`invoice_detail.${p}.name`,type:"text",id:d+"_name",value:t,errors:W,touched:w},{placeholder:"Description",label:"Description",name:`invoice_detail.${p}.description`,type:"text",id:d+"_description",value:r},{placeholder:"",label:"Qty",type:"number",name:`invoice_detail.${p}.qty`,id:d+"_qty",value:a},{placeholder:"",label:"price",type:"number",name:`invoice_detail.${p}.price`,id:d+"_price",value:C}];return e.jsxs(e.Fragment,{children:[q.map(h=>e.jsx(O,{onEditItem:v=>M(v),onBlur:v=>D(v),cellData:{placeholder:h.placeholder,name:h.name,type:h.type,id:h.id,value:h.value,errors:h.errors,touched:h.touched}},h.label)),e.jsx(i,{children:e.jsx(l,{direction:"column",justifyContent:"flex-end",alignItems:"flex-end",spacing:2,children:e.jsx(c,{sx:{pl:2},children:y===void 0?e.jsx(se,{width:520,height:16}):e.jsx(s,{children:((R=y.country)==null?void 0:R.prefix)+""+(C*a).toFixed(2)})})})}),e.jsx(i,{align:"center",children:e.jsx(L,{componentsProps:{tooltip:{sx:{backgroundColor:b===J.DARK?j.palette.grey[50]:j.palette.grey[700],opacity:.9}}},title:"Remove Item",children:e.jsx(u,{color:"error",onClick:()=>g(!0),children:e.jsx(Q,{})})})}),e.jsx(ee,{title:t,open:A,handleClose:F})]})}he.propTypes={id:n.any,name:n.any,description:n.any,qty:n.any,price:n.any,onDeleteItem:n.any,onEditItem:n.any,index:n.any,Blur:n.any,errors:n.any,touched:n.any};function xe({open:d,setOpen:t,handlerAddress:r}){function a(){t(!1)}return e.jsxs(H,{maxWidth:"sm",open:d,onClose:a,sx:{"& .MuiDialog-paper":{p:0},"& .MuiBackdrop-root":{opacity:"0.5 !important"}},children:[e.jsx(K,{children:e.jsxs(l,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{variant:"h5",children:"Select Address"}),e.jsx(u,{startIcon:e.jsx(U,{}),onClick:a,color:"primary",children:"Add New"})]})}),e.jsx(P,{}),e.jsxs(V,{sx:{p:2.5},children:[e.jsx(N,{sx:{width:"100%",pb:2},children:e.jsx(B,{autoFocus:!0,id:"name",InputProps:{startAdornment:e.jsx(te,{position:"start",children:e.jsx(Y,{size:18})})},placeholder:"Search",fullWidth:!0})}),e.jsx(l,{spacing:2,children:e.jsx(E,{handlerAddress:r})})]}),e.jsx(P,{}),e.jsxs(X,{sx:{p:2.5},children:[e.jsx(u,{color:"error",onClick:a,children:"Cancel"}),e.jsx(u,{onClick:a,color:"primary",variant:"contained",children:"Add"})]})]})}function E({handlerAddress:d}){const t=k(),r=[{name:"Ian Carpenter",address:"1754 Ureate, RhodSA5 5BO",phone:"+91 1234567890",email:"iacrpt65@gmail.com"},{name:"Belle J. Richter",address:"1300 Mine RoadQuemado, NM 87829",phone:"305-829-7809",email:"belljrc23@gmail.com"},{name:"Ritika Yohannan",address:"3488 Arbutus DriveMiami, FL",phone:"+91 1234567890",email:"rtyhn65@gmail.com"},{name:"Jesse G. Hassen",address:"3488 Arbutus DriveMiami, FL 33012",phone:"+91 1234567890",email:"jessghs78@gmail.com"},{name:"Christopher P. Iacovelli",address:"4388 House DriveWesrville, OH",phone:"+91 1234567890",email:"crpthl643@gmail.com"},{name:"Thomas D. Johnson",address:"4388 House DriveWestville, OH +91",phone:"1234567890",email:"thomshj56@gmail.com"}];return e.jsx(e.Fragment,{children:r.map(a=>e.jsxs(c,{onClick:()=>d(a),sx:{width:"100%",border:"1px solid",borderColor:"secondary.200",borderRadius:1,p:1.25,"&:hover":{bgcolor:t.palette.primary.lighter,borderColor:t.palette.primary.lighter}},children:[e.jsx(s,{variant:"subtitle1",children:a.name}),e.jsxs(l,{direction:{xs:"column",sm:"row"},spacing:1,children:[e.jsx(s,{variant:"body2",color:"secondary",children:a.address}),e.jsx(s,{variant:"body2",color:"secondary",children:a.phone}),e.jsx(s,{variant:"body2",color:"secondary",children:a.email})]})]},a.email))})}xe.propTypes={open:n.bool,setOpen:n.func,handlerAddress:n.func};E.propTypes={handlerAddress:n.func};function pe({isOpen:d,setIsOpen:t,invoiceInfo:r,items:a,onAddNextInvoice:C}){var A,g,F;const T=k();function M(){t(!1)}const p=()=>{t(!1),C()};let D,f;try{D=$(new Date(r.date),"dd/mm/yyyy"),f=$(new Date(r.due_date),"dd/MM/yyyy")}catch(o){console.log("error - ",o)}const m=(A=r==null?void 0:r.invoice_detail)==null?void 0:A.reduce((o,w)=>w.name.trim().length>0?o+Number(w.price*Math.floor(w.qty)):o,0),y=r.tax*m/100,j=r.discount*m/100,b=m-j+y;return e.jsx(H,{open:d,onClose:M,maxWidth:"md",sx:{"& .MuiDialog-paper":{p:0,minWidth:{xl:1200,sm:"calc(100% - 20%)"}},"& .MuiBackdrop-root":{opacity:"0.5 !important"}},children:e.jsxs(c,{sx:{pb:2.5},children:[e.jsx("span",{"aria-hidden":"true",children:"â€‹"}),e.jsxs(c,{id:"print",sx:{p:2.5},children:[e.jsxs(c,{sx:{pb:2.5},children:[e.jsxs(l,{sx:{flexDirection:{xs:"column",sm:"row"}},justifyContent:"space-between",children:[e.jsxs(c,{sx:{pt:2.5},children:[e.jsxs(l,{direction:"row",spacing:2,children:[e.jsx(Z,{})," ",e.jsx(I,{label:"Paid",variant:"light",color:"success"})]}),e.jsx(s,{color:"secondary",children:r.invoice_id})]}),e.jsxs(c,{sx:{pt:2.5,pb:1.75},children:[e.jsxs(l,{direction:"row",justifyContent:"space-between",children:[e.jsxs(s,{sx:{pl:4},variant:"subtitle1",children:["Date"," "]}),e.jsx(s,{children:D})]}),e.jsxs(l,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{sx:{pr:2,overflow:"hidden"},variant:"subtitle1",children:"Due Date"}),e.jsx(s,{children:f})]})]})]}),e.jsx(c,{sx:{pt:2.5},children:e.jsxs(x,{container:!0,spacing:2,justifyContent:"space-between",direction:"row",children:[e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(c,{sx:{border:1,minHeight:168,borderColor:"secondary.200",borderRadius:.5,p:2.5},children:e.jsx(x,{container:!0,direction:"row",children:e.jsxs(x,{item:!0,md:8,children:[e.jsx(s,{variant:"h5",children:"From:"}),e.jsxs(N,{sx:{width:"100%"},children:[e.jsx(s,{variant:"subtitle1",children:r.cashierInfo.name}),e.jsx(s,{color:"secondary",children:r.cashierInfo.address}),e.jsx(s,{color:"secondary",children:r.cashierInfo.phone}),e.jsx(s,{color:"secondary",children:r.cashierInfo.email})]})]})})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(c,{sx:{border:1,minHeight:168,borderColor:"secondary.200",borderRadius:.5,p:2.5},children:e.jsx(x,{container:!0,direction:"row",children:e.jsxs(x,{item:!0,md:8,children:[e.jsx(s,{variant:"h5",children:"To:"}),e.jsxs(N,{sx:{width:"100%"},children:[e.jsx(s,{variant:"subtitle1",children:r.customerInfo.name}),e.jsx(s,{color:"secondary",children:r.customerInfo.address}),e.jsx(s,{color:"secondary",children:r.customerInfo.phone}),e.jsx(s,{color:"secondary",children:r.customerInfo.email})]})]})})})})]})})]}),e.jsx(oe,{children:e.jsxs(ie,{children:[e.jsx(de,{children:e.jsxs(S,{children:[e.jsx(i,{children:"#"}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Description"}),e.jsx(i,{align:"right",children:"Qty"}),e.jsx(i,{align:"right",children:"Price"}),e.jsx(i,{align:"right",children:"Amount"})]})}),e.jsx(le,{children:a.map(o=>e.jsxs(S,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(i,{children:a.indexOf(o)+1}),e.jsx(i,{children:o.name}),e.jsx(i,{children:o.description}),e.jsx(i,{align:"right",children:o.qty}),e.jsxs(i,{align:"right",children:["$",Number(o.price).toFixed(2)]}),e.jsxs(i,{align:"right",children:["$",Number(o.price*o.qty).toFixed(2)]})]},o.name))})]})}),e.jsx(c,{sx:{p:2.5},children:e.jsx(x,{container:!0,direction:"row",justifyContent:"flex-end",children:e.jsx(x,{item:!0,md:4,children:e.jsxs(l,{spacing:2,children:[e.jsxs(l,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{color:"secondary",children:"Sub Total:"}),e.jsxs(s,{variant:"h6",children:["$",m.toFixed(2)]})]}),e.jsxs(l,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{color:"secondary",children:"Discount:"}),e.jsxs(s,{variant:"h6",color:T.palette.success.main,children:["$",j.toFixed(2)]})]}),e.jsxs(l,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{color:T.palette.secondary.main,children:"Tax:"}),e.jsxs(s,{variant:"h6",children:["$",y.toFixed(2)]})]}),e.jsxs(l,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{sx:{pr:2},variant:"subtitle1",children:"Grand Total:"}),e.jsxs(s,{variant:"h6",children:["$",b%1===0?b:b.toFixed(2)]})]})]})})})})]}),e.jsx(c,{sx:{p:2.5},children:e.jsxs(s,{children:["Notes: ",r.notes]})}),e.jsxs(l,{direction:"row",justifyContent:"flex-end",spacing:2,sx:{p:2.5},children:[e.jsx(u,{color:"secondary",onClick:p,children:"Cancel"}),e.jsx(ne,{document:e.jsx(ae,{list:r}),fileName:`${(r==null?void 0:r.invoiceId)||(r==null?void 0:r.invoice_id)}-${(r==null?void 0:r.customer_name)||((g=r==null?void 0:r.from)==null?void 0:g.name)||((F=r==null?void 0:r.customerInfo)==null?void 0:F.name)}.pdf`,style:{textDecoration:"none"},children:e.jsx(u,{startIcon:e.jsx(ce,{}),variant:"contained",color:"primary",children:"Download"})})]})]})})}pe.propTypes={isOpen:n.any,setIsOpen:n.any,invoiceInfo:n.any,items:n.any,onAddNextInvoice:n.any};export{xe as A,he as I,pe as a};
