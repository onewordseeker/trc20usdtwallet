import{r as l,j as e,M as j,S as y,B as p,F as h,P as c,D as T,O as P,G as b,R as S}from"./index-BE75cmpZ.js";import{u as C,f as d,g as D,e as R}from"./index-OdbGXu2K.js";import{S as v}from"./ScrollX-CyXoT44w.js";import"./LinearWithLabel-KVFg8Iwf.js";import{C as M,T as g}from"./Filter-y71UMtT7.js";import"./mock-data-CjOvdTvj.js";import{T as w,a as A,b as E}from"./TableContainer-s0yUIJEg.js";import{T as I}from"./TableHead-DpC64hQ0.js";import{T as u}from"./TableRow-D1lYbwwu.js";import{T as x}from"./TableCell-BOHhKnuh.js";import{g as K}from"./Users-4Bn6yUGa.js";import"./DocumentDownload-DDJvvIVF.js";import"./Slider-BUeMRvnO.js";import"./visuallyHidden-Dan1xhjv.js";import"./Send-DGO5bAte.js";import"./Pagination-BWXH2B2W.js";import"./index-ZtNy4ppB.js";import"./Checkbox-DNUoWgPJ.js";import"./Minus-YvqWlFLu.js";import"./index-cq_cuLYi.js";function f({data:o,columns:i,top:r}){const t=C({data:o,columns:i,getCoreRowModel:D(),getPaginationRowModel:R(),debugTable:!0});let n=[];return t.getAllColumns().map(a=>n.push({label:typeof a.columnDef.header=="string"?a.columnDef.header:"#",key:a.columnDef.accessorKey})),e.jsx(j,{title:"Activity logs",content:!1,secondary:e.jsx(M,{data:o,headers:n,filename:r?"pagination-top.csv":"pagination-bottom.csv"}),children:e.jsx(v,{children:e.jsxs(y,{children:[r&&e.jsx(p,{sx:{p:2},children:e.jsx(g,{setPageSize:t.setPageSize,setPageIndex:t.setPageIndex,getState:t.getState,getPageCount:t.getPageCount})}),e.jsx(w,{children:e.jsxs(A,{children:[e.jsx(I,{children:t.getHeaderGroups().map(a=>e.jsx(u,{children:a.headers.map(s=>e.jsx(x,{...s.column.columnDef.meta,children:s.isPlaceholder?null:d(s.column.columnDef.header,s.getContext())},s.id))},a.id))}),e.jsx(E,{children:t.getRowModel().rows.map(a=>e.jsx(u,{children:a.getVisibleCells().map(s=>e.jsx(x,{...s.column.columnDef.meta,children:d(s.column.columnDef.cell,s.getContext())},s.id))},a.id))})]})}),!r&&e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx(p,{sx:{p:2},children:e.jsx(g,{setPageSize:t.setPageSize,setPageIndex:t.setPageIndex,getState:t.getState,getPageCount:t.getPageCount})})]})]})})})}function L({data:o}){const i=l.useMemo(()=>[{header:"Date & Time",accessorKey:"timestamp"},{header:"User",accessorKey:"username"},{header:"Activity Type",accessorKey:"type"},{header:"Description",accessorKey:"description"}],[]);return e.jsx(f,{data:o,columns:i})}f.propTypes={data:c.array,columns:c.array,top:c.bool};function z({layout:o=S.SIMPLE}){const[i,r]=l.useState([]);l.useEffect(()=>{t()},[]);const t=async()=>{const n=await K();let a=[];n.logs.map(s=>{s.activities.map(m=>{a.push({timestamp:m.created_at,username:s.fullname,type:m.title,description:m.description})})}),r(a)};return e.jsxs(l.Suspense,{fallback:e.jsx(T,{}),children:[e.jsx(P,{}),e.jsx(p,{children:e.jsx(b,{item:!0,xs:12,children:e.jsx(L,{data:i})})})]})}z.propTypes={layout:c.any};export{z as default};
