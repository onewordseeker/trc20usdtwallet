import{r as C,a4 as Be,a5 as l,a6 as Ve,P as f,aZ as _,aP as R,j as e,az as ee,al as re,B as E,S as p,T as F,e as H,I as W,K,F as te,a$ as ie,b0 as ne,G as d,J as j,n as M,a0 as se,ah as ae,ai as oe,U as V,b5 as le,aq as A,aU as k,V as de,Y as z,bb as ce,b4 as $,A as he,d as N,ay as ue,aW as pe,aX as xe,aY as me,c as X,f as je,aa as ge,aR as fe,ad as q,h as Z,v as Pe,aC as Re,x as Fe,M as He}from"./index-BE75cmpZ.js";import{u as O,a as Le,P as ye,A as Ue,h as $e,d as qe,b as Ze,H as Ke,c as Ne,C as we,E as Xe,e as Ge,D as Ye,I as Je,f as Qe,g as _e}from"./ItemDetails-CVQIklY1.js";import{M as ve}from"./MultiFile-CUEap6OC.js";import{D as Se}from"./DesktopDatePicker-Dk1ljeGu.js";import{M as Ce}from"./MoreIcon-TXN54Jo3.js";import{T as P}from"./TableRow-D1lYbwwu.js";import{T as c}from"./TableCell-BOHhKnuh.js";import{T as er}from"./Task-lEJv1YSM.js";import{T as De,a as be,b as Te}from"./TableContainer-s0yUIJEg.js";import{T as rr}from"./TableHead-DpC64hQ0.js";import"./redux-2smOZOIh.js";import"./DocumentUpload-a6GGyN8B.js";import"./ListItem-eemVPKEi.js";import"./ListItemSecondaryAction-DuTfPZL3.js";import"./Document-B8_fGyzr.js";import"./dateViewRenderers-BUIkIYe-.js";import"./InputAdornment-CY-Tyt4a.js";var tr=["variant","color","size"],ir=function(i){var n=i.color;return l.createElement(l.Fragment,null,l.createElement("path",{d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81v8.37C2 19.83 4.17 22 7.81 22h8.37c3.64 0 5.81-2.17 5.81-5.81V7.81C22 4.17 19.83 2 16.19 2ZM16 12.75h-3.25V16c0 .41-.34.75-.75.75s-.75-.34-.75-.75v-3.25H8c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h3.25V8c0-.41.34-.75.75-.75s.75.34.75.75v3.25H16c.41 0 .75.34.75.75s-.34.75-.75.75Z",fill:n}))},nr=function(i){var n=i.color;return l.createElement(l.Fragment,null,l.createElement("path",{d:"M14.99 12H16M8 12h3.81M12 16V8M2 13.04V15c0 5 2 7 7 7h6c5 0 7-2 7-7V9c0-5-2-7-7-7H9C4 2 2 4 2 9",stroke:n,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},sr=function(i){var n=i.color;return l.createElement(l.Fragment,null,l.createElement("path",{opacity:".4",d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81v8.37C2 19.83 4.17 22 7.81 22h8.37c3.64 0 5.81-2.17 5.81-5.81V7.81C22 4.17 19.83 2 16.19 2Z",fill:n}),l.createElement("path",{d:"M16 11.25h-3.25V8c0-.41-.34-.75-.75-.75s-.75.34-.75.75v3.25H8c-.41 0-.75.34-.75.75s.34.75.75.75h3.25V16c0 .41.34.75.75.75s.75-.34.75-.75v-3.25H16c.41 0 .75-.34.75-.75s-.34-.75-.75-.75Z",fill:n}))},Q=function(i){var n=i.color;return l.createElement(l.Fragment,null,l.createElement("path",{d:"M8 12h8M12 16V8M9 22h6c5 0 7-2 7-7V9c0-5-2-7-7-7H9C4 2 2 4 2 9v6c0 5 2 7 7 7Z",stroke:n,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},ar=function(i){var n=i.color;return l.createElement(l.Fragment,null,l.createElement("path",{d:"M16 12.75H8c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h8c.41 0 .75.34.75.75s-.34.75-.75.75Z",fill:n}),l.createElement("path",{d:"M12 16.75c-.41 0-.75-.34-.75-.75V8c0-.41.34-.75.75-.75s.75.34.75.75v8c0 .41-.34.75-.75.75Z",fill:n}),l.createElement("path",{d:"M15 22.75H9c-5.43 0-7.75-2.32-7.75-7.75V9c0-5.43 2.32-7.75 7.75-7.75h6c5.43 0 7.75 2.32 7.75 7.75v6c0 5.43-2.32 7.75-7.75 7.75Zm-6-20C4.39 2.75 2.75 4.39 2.75 9v6c0 4.61 1.64 6.25 6.25 6.25h6c4.61 0 6.25-1.64 6.25-6.25V9c0-4.61-1.64-6.25-6.25-6.25H9Z",fill:n}))},or=function(i){var n=i.color;return l.createElement(l.Fragment,null,l.createElement("g",{opacity:".4",stroke:n,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},l.createElement("path",{d:"M8 12h8M12 16V8"})),l.createElement("path",{d:"M9 22h6c5 0 7-2 7-7V9c0-5-2-7-7-7H9C4 2 2 4 2 9v6c0 5 2 7 7 7Z",stroke:n,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},lr=function(i,n){switch(i){case"Bold":return l.createElement(ir,{color:n});case"Broken":return l.createElement(nr,{color:n});case"Bulk":return l.createElement(sr,{color:n});case"Linear":return l.createElement(Q,{color:n});case"Outline":return l.createElement(ar,{color:n});case"TwoTone":return l.createElement(or,{color:n});default:return l.createElement(Q,{color:n})}},L=C.forwardRef(function(s,i){var n=s.variant,t=s.color,r=s.size,a=Be(s,tr);return l.createElement("svg",Ve({},a,{xmlns:"http://www.w3.org/2000/svg",ref:i,width:r,height:r,viewBox:"0 0 24 24",fill:"none"}),lr(n,t))});L.propTypes={variant:f.oneOf(["Linear","Bold","Broken","Bulk","Outline","TwoTone"]),color:f.string,size:f.oneOfType([f.string,f.number])};L.defaultProps={variant:"Linear",color:"currentColor",size:"24"};L.displayName="AddSquare";const dr=new ue.Chance,cr=pe({title:xe().required("User story title is required"),dueDate:me().required("Due date is required").nullable()});function Ie({open:s,handleDrawerOpen:i}){const{backlogs:n}=O(),t=_({initialValues:{id:"",title:"",assign:null,columnId:"",priority:"low",dueDate:null,acceptance:"",description:"",commentIds:"",image:!1,itemIds:[],files:[]},enableReinitialize:!0,validationSchema:cr,onSubmit:(r,{resetForm:a})=>{r.id=`${dr.integer({min:1e3,max:9999})}`,Le(r),R({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"}}),i(),a()}});return e.jsx(ee,{sx:{ml:s?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{width:{xs:320,md:450},border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:s,ModalProps:{keepMounted:!0},onClose:i,children:s&&e.jsxs(re,{sx:{overflowX:"hidden",height:"100vh"},children:[e.jsx(E,{sx:{p:3},children:e.jsxs(p,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(F,{variant:"h4",children:"Add Story"}),e.jsx(H,{title:"Close",children:e.jsx(W,{color:"secondary",onClick:i,size:"small",sx:{fontSize:"0.875rem"},children:e.jsx(K,{style:{transform:"rotate(45deg)"}})})})]})}),e.jsx(te,{}),e.jsx(E,{sx:{p:3},children:e.jsx("form",{onSubmit:t.handleSubmit,children:e.jsx(ie,{dateAdapter:ne,children:e.jsxs(d,{container:!0,spacing:2.5,children:[e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"Title"}),e.jsx(M,{fullWidth:!0,id:"title",name:"title",placeholder:"Title",value:t.values.title,onChange:t.handleChange,error:t.touched.title&&!!t.errors.title,helperText:t.touched.title&&t.errors.title})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"Assign to"}),e.jsx(se,{id:"assign",value:(n==null?void 0:n.profiles.find(r=>r.id===t.values.assign))||null,onChange:(r,a)=>{t.setFieldValue("assign",a==null?void 0:a.id)},options:n==null?void 0:n.profiles,fullWidth:!0,autoHighlight:!0,getOptionLabel:r=>r.name,isOptionEqualToValue:r=>r.id===t.values.assign,renderOption:(r,a)=>e.jsxs(E,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...r,children:[e.jsx("img",{loading:"lazy",width:"20",src:ae(`${a.avatar}`,oe.USERS),alt:""}),a.name]}),renderInput:r=>e.jsx(M,{...r,placeholder:"Choose a assignee",inputProps:{...r.inputProps,autoComplete:"new-password"}})})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"Prioritize"}),e.jsx(V,{children:e.jsxs(le,{row:!0,"aria-label":"color",value:t.values.priority,onChange:t.handleChange,name:"priority",id:"priority",children:[e.jsx(A,{value:"low",control:e.jsx(k,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),e.jsx(A,{value:"medium",control:e.jsx(k,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),e.jsx(A,{value:"high",control:e.jsx(k,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"Due date"}),e.jsx(Se,{value:t.values.dueDate,format:"dd/MM/yyyy",onChange:r=>{t.setFieldValue("dueDate",r)}})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"Acceptance"}),e.jsx(M,{fullWidth:!0,id:"acceptance",name:"acceptance",multiline:!0,rows:3,value:t.values.acceptance,onChange:t.handleChange,error:t.touched.acceptance&&!!t.errors.acceptance,helperText:t.touched.acceptance&&t.errors.acceptance})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"Description"}),e.jsx(M,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:t.values.description,onChange:t.handleChange,error:t.touched.description&&!!t.errors.description,helperText:t.touched.description&&t.errors.description})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"State"}),e.jsx(V,{fullWidth:!0,sx:{m:1},children:e.jsx(de,{id:"columnId",name:"columnId",displayEmpty:!0,value:t.values.columnId,onChange:t.handleChange,inputProps:{"aria-label":"Without label"},children:n==null?void 0:n.columns.map((r,a)=>e.jsx(z,{value:r.id,children:r.title},a))})})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(d,{container:!0,spacing:1,children:[e.jsx(d,{item:!0,xs:12,children:e.jsx(j,{sx:{mt:.5},children:"Attachments:"})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(ve,{type:ce.STANDARD,showList:!0,setFieldValue:t.setFieldValue,files:t.values.files,error:t.touched.files&&!!t.errors.files})}),t.touched.files&&t.errors.files&&e.jsx(d,{item:!0,xs:12,children:e.jsx($,{error:!0,id:"standard-weight-helper-text-password-login",children:t.errors.files})})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(he,{children:e.jsx(N,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})})]})})}Ie.propTypes={open:f.bool,handleDrawerOpen:f.func};const hr=(s,i)=>{const n=i.palette.mode===q.DARK?Z(i.palette.background.paper,.9):Z(i.palette.primary.lighter,.99);return{backgroundColor:s?n:"transparent",userSelect:"none"}};function Me({itemId:s,index:i}){const n=X(),{backlogs:t}=O(),r=t==null?void 0:t.items.filter(o=>o.id===s)[0],a=t==null?void 0:t.columns.filter(o=>o.itemIds.filter(w=>w===r.id)[0])[0],u=t==null?void 0:t.profiles.filter(o=>o.id===r.assign)[0],x=()=>{$e(s)},[v,g]=C.useState(null),m=o=>{g(o==null?void 0:o.currentTarget)},y=()=>{g(null)},[b,S]=C.useState(!1),T=o=>{S(!1),o&&(qe(r.id),R({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))};return e.jsx(ye,{draggableId:r.id,index:i,children:(o,w)=>e.jsxs(P,{hover:!0,...o.draggableProps,...o.dragHandleProps,ref:o.innerRef,sx:{"& th,& td":{whiteSpace:"nowrap"},"& .more-button":{opacity:0},":hover":{"& .more-button":{opacity:1}},...!!v&&{"& .more-button":{opacity:1}},...hr(w.isDragging,n)},children:[e.jsx(c,{sx:{pl:3,minWidth:120,width:120,height:46}}),e.jsx(c,{sx:{width:110,minWidth:110},children:e.jsxs(p,{direction:"row",spacing:.75,alignItems:"center",children:[e.jsx(er,{size:16,style:{color:n.palette.info.main,marginTop:-2}}),e.jsx(F,{variant:"subtitle2",children:r.id})]})}),e.jsx(c,{sx:{maxWidth:"calc(100vw - 850px)",minWidth:140},component:"th",scope:"row",children:e.jsx(je,{underline:"hover",color:"default",onClick:x,sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"info.main"},cursor:"pointer"},children:r.title})}),e.jsxs(c,{sx:{width:60,minWidth:60},children:[e.jsx(W,{className:"more-button",size:"small",onClick:m,"aria-controls":"menu-comment","aria-haspopup":"true",color:"secondary",sx:{color:"text.secondary"},children:e.jsx(Ce,{})}),e.jsxs(ge,{id:"menu-comment",anchorEl:v,keepMounted:!0,open:!!v,onClose:y,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(z,{onClick:()=>{y(),x()},children:"Edit"}),e.jsx(z,{onClick:()=>{y(),S(!0)},children:"Delete"})]}),e.jsx(Ue,{title:r.title,open:b,handleClose:T})]}),e.jsx(c,{sx:{width:90,minWidth:90},children:a?a.title:"New"}),e.jsx(c,{sx:{width:140,minWidth:140},children:u?u.name:""}),e.jsx(c,{sx:{width:85,minWidth:85,textTransform:"capitalize"},children:r.priority}),e.jsx(c,{sx:{width:120,minWidth:120},children:r.dueDate?fe(new Date(r.dueDate),"d MMM yyyy"):""})]},r.id)})}Me.propTypes={itemId:f.string,index:f.number};const ur=new ue.Chance,pr=pe({title:xe().required("Task title is required"),dueDate:me().required("Due date is required").nullable()});function Ee({open:s,handleDrawerOpen:i,storyId:n}){const{backlogs:t}=O(),r=_({initialValues:{id:"",title:"",assign:null,priority:"low",dueDate:null,description:"",commentIds:"",image:!1,storyId:"",columnId:t==null?void 0:t.columns[0].id,files:[]},enableReinitialize:!0,validationSchema:pr,onSubmit:(a,{resetForm:u})=>{const x={id:a.id||`${ur.integer({min:1e3,max:9999})}`,title:a.title,assign:a.assign,priority:a.priority,dueDate:a.dueDate?new Date(a.dueDate):new Date,description:a.description,commentIds:a.commentIds,image:a.image};Ze(a.columnId,x,n),R({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"}}),i(),u()}});return e.jsx(ee,{sx:{ml:s?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{width:{xs:320,md:450},border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:s,ModalProps:{keepMounted:!0},onClose:i,children:s&&e.jsxs(re,{sx:{overflowX:"hidden",height:"100vh"},children:[e.jsx(E,{sx:{p:3},children:e.jsxs(p,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(F,{variant:"h4",children:"Add Task"}),e.jsx(H,{title:"Close",children:e.jsx(W,{color:"secondary",onClick:i,size:"small",sx:{fontSize:"0.875rem"},children:e.jsx(K,{style:{transform:"rotate(49deg)"}})})})]})}),e.jsx(te,{}),e.jsx(E,{sx:{p:3},children:e.jsx("form",{onSubmit:r.handleSubmit,children:e.jsx(ie,{dateAdapter:ne,children:e.jsxs(d,{container:!0,spacing:2.5,children:[e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"Title"}),e.jsx(M,{fullWidth:!0,id:"title",name:"title",placeholder:"Title",value:r.values.title,onChange:r.handleChange,error:r.touched.title&&!!r.errors.title,helperText:r.touched.title&&r.errors.title})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"Assign to"}),e.jsx(se,{id:"assign",value:(t==null?void 0:t.profiles.find(a=>a.id===r.values.assign))||null,onChange:(a,u)=>{r.setFieldValue("assign",u==null?void 0:u.id)},options:t==null?void 0:t.profiles,fullWidth:!0,autoHighlight:!0,getOptionLabel:a=>a.name,isOptionEqualToValue:a=>a.id===r.values.assign,renderOption:(a,u)=>e.jsxs(E,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...a,children:[e.jsx("img",{loading:"lazy",width:"20",src:ae(`${u.avatar}`,oe.USERS),alt:""}),u.name]}),renderInput:a=>e.jsx(M,{...a,placeholder:"Choose a assignee",inputProps:{...a.inputProps,autoComplete:"new-password"}})})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"Prioritize"}),e.jsx(V,{children:e.jsxs(le,{row:!0,"aria-label":"color",value:r.values.priority,onChange:r.handleChange,name:"priority",id:"priority",children:[e.jsx(A,{value:"low",control:e.jsx(k,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),e.jsx(A,{value:"medium",control:e.jsx(k,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),e.jsx(A,{value:"high",control:e.jsx(k,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})]})}),e.jsxs(d,{item:!0,xs:12,children:[e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"Due date"}),e.jsx(Se,{value:r.values.dueDate,format:"dd/MM/yyyy",onChange:a=>{r.setFieldValue("dueDate",a)}})]}),r.touched.dueDate&&r.errors.dueDate&&e.jsx($,{error:!0,children:r.errors.dueDate})]}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"Description"}),e.jsx(M,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:r.values.description,onChange:r.handleChange,error:r.touched.description&&!!r.errors.description,helperText:r.touched.description&&r.errors.description})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(j,{children:"State"}),e.jsx(V,{fullWidth:!0,sx:{m:1},children:e.jsx(de,{id:"columnId",name:"columnId",displayEmpty:!0,value:r.values.columnId,onChange:r.handleChange,inputProps:{"aria-label":"Without label"},children:t==null?void 0:t.columns.map((a,u)=>e.jsx(z,{value:a.id,children:a.title},u))})})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsxs(d,{container:!0,spacing:1,children:[e.jsx(d,{item:!0,xs:12,children:e.jsx(j,{sx:{mt:.5},children:"Attachments:"})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(ve,{type:ce.STANDARD,showList:!0,setFieldValue:r.setFieldValue,files:r.values.files,error:r.touched.files&&!!r.errors.files})}),r.touched.files&&r.errors.files&&e.jsx(d,{item:!0,xs:12,children:e.jsx($,{error:!0,id:"standard-weight-helper-text-password-login",children:r.errors.files})})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(he,{children:e.jsx(N,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})})]})})}Ee.propTypes={open:f.bool,handleDrawerOpen:f.func,storyId:f.string};const xr=(s,i,n)=>{let t="transparent";return n&&(t=i.palette.mode===q.DARK?i.palette.background.default:i.palette.secondary.lighter),s&&(t=i.palette.mode===q.DARK?i.palette.background.default:i.palette.primary.lighter),{backgroundColor:t,userSelect:"none"}},mr=()=>({background:"transparent"});function We({story:s,index:i}){const n=X(),{backlogs:t}=O(),[r,a]=C.useState(i===0),u=t==null?void 0:t.columns.filter(h=>h.id===s.columnId)[0],x=t==null?void 0:t.profiles.filter(h=>h.id===s.assign)[0],[v,g]=C.useState(!1),m=()=>{g(h=>!h)},y=()=>{g(h=>!h)},[b,S]=C.useState(!1),T=()=>{S(h=>!h)},o=()=>{S(h=>!h)},[w,D]=C.useState(null),B=h=>{D(h==null?void 0:h.currentTarget)},I=()=>{D(null)},[Ae,G]=C.useState(!1),ke=h=>{G(!1),h&&(Ge(s.id),R({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))};return e.jsxs(e.Fragment,{children:[e.jsx(ye,{draggableId:s.id,index:i,children:(h,ze)=>e.jsxs(e.Fragment,{children:[e.jsxs(P,{hover:!0,...h.draggableProps,...h.dragHandleProps,ref:h.innerRef,sx:{...xr(ze.isDragging,n,r),...!r&&{"& .MuiTableCell-root":{border:"none"}}},children:[e.jsx(c,{sx:{pl:3,minWidth:120,width:120,height:46},children:e.jsxs(p,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(H,{title:"Add Task",children:e.jsx(W,{"aria-label":"expand row",onClick:y,size:"small",sx:{fontSize:"1.15rem"},children:e.jsx(L,{color:n.palette.primary.main})})}),e.jsx(W,{"aria-label":"expand row",size:"small",onClick:()=>a(!r),color:"secondary",children:r?e.jsx(Pe,{}):e.jsx(Re,{})})]})}),e.jsx(c,{sx:{width:110,minWidth:110},children:e.jsxs(p,{direction:"row",spacing:.75,alignItems:"center",children:[e.jsx(Ke,{size:16,style:{color:n.palette.primary.main,marginTop:-2}}),e.jsx(F,{variant:"subtitle2",children:s.id})]})}),e.jsx(c,{sx:{maxWidth:"calc(100vw - 850px)",minWidth:140},component:"th",scope:"row",children:e.jsx(je,{underline:"hover",color:"default",onClick:o,sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"primary.main"},cursor:"pointer"},children:s.title})}),e.jsxs(c,{sx:{width:60,minWidth:60},children:[e.jsx(W,{size:"small","aria-controls":"menu-comment",onClick:B,"aria-haspopup":"true",color:"secondary",sx:{color:"text.secondary"},children:e.jsx(Ce,{})}),e.jsxs(ge,{id:"menu-comment",anchorEl:w,keepMounted:!0,open:!!w,onClose:I,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(z,{onClick:()=>{I(),o()},children:"Edit"}),e.jsx(z,{onClick:()=>{I(),G(!0)},children:"Delete"})]}),e.jsx(Ne,{title:s.title,open:Ae,handleClose:ke})]}),e.jsx(c,{sx:{width:90,minWidth:90},children:u?u.title:""}),e.jsx(c,{sx:{width:140,minWidth:140},children:x?x.name:""}),e.jsx(c,{sx:{width:85,minWidth:85,textTransform:"capitalize"},children:s.priority}),e.jsx(c,{sx:{width:120,minWidth:120},children:s.dueDate?fe(new Date(s.dueDate),"d MMM yyyy"):""})]}),e.jsx(we,{droppableId:s.id,type:"item",children:U=>{var Y;return e.jsx(P,{ref:U.innerRef,...U.droppableProps,sx:mr(),children:e.jsx(c,{sx:{padding:0},colSpan:8,children:e.jsx(Fe,{in:r,timeout:"auto",unmountOnExit:!0,children:r&&e.jsx(E,{sx:{margin:0},children:e.jsx(De,{children:e.jsx(be,{size:"small","aria-label":"purchases",children:e.jsxs(Te,{children:[(Y=s.itemIds)==null?void 0:Y.map((J,Oe)=>e.jsx(Me,{itemId:J,index:Oe},J)),U.placeholder]})})})})})})})}})]})}),e.jsx(Xe,{story:s,open:b,handleDrawerOpen:T}),e.jsx(Ee,{open:v,handleDrawerOpen:m,storyId:s.id})]})}We.propTypes={story:f.any,index:f.number};const jr=(s,i)=>({bgcolor:s?Z(i.palette.secondary.lighter,.65):"transparent"});function Or(){const s=X(),{backlogs:i}=O(),n=x=>{let v;const{source:g,destination:m,draggableId:y,type:b}=x;if(!m||m.droppableId===g.droppableId&&m.index===g.index)return;if(b==="user-story"){const o=Array.from(i==null?void 0:i.userStoryOrder);o.splice(g.index,1),o.splice(m==null?void 0:m.index,0,y),Qe(o);return}const S=i==null?void 0:i.userStory.filter(o=>o.id===g.droppableId)[0],T=i==null?void 0:i.userStory.filter(o=>o.id===m.droppableId)[0];if(S===T){const o=Array.from(S.itemIds);o.splice(g.index,1),o.splice(m.index,0,y);const w={...S,itemIds:o};v=i==null?void 0:i.userStory.map(D=>D.id===w.id?w:D)}else{const o=Array.from(S.itemIds);o.splice(g.index,1);const w={...S,itemIds:o},D=Array.from(T.itemIds);D.splice(m.index,0,y);const B={...T,itemIds:D};v=i==null?void 0:i.userStory.map(I=>I.id===w.id?w:I.id===B.id?B:I)}_e(v)},[t,r]=C.useState(!1),a=()=>{r(x=>!x)},u=()=>{r(x=>!x)};return e.jsx(He,{content:!1,children:e.jsxs(De,{sx:{"& .MuiTableCell-root":{p:1.25}},children:[e.jsx(Ye,{onDragEnd:n,children:e.jsx(we,{droppableId:"user-story",type:"user-story",children:(x,v)=>e.jsxs(be,{size:"small","aria-label":"collapsible table",...x.droppableProps,ref:x.innerRef,sx:jr(v.isDraggingOver,s),children:[e.jsx(rr,{sx:{bgcolor:s.palette.background.paper,borderTop:"none",borderBottomWidth:"1px","& th,& td":{whiteSpace:"nowrap"}},children:e.jsxs(P,{children:[e.jsx(c,{sx:{pl:3},children:e.jsx(H,{title:"Add User Story",children:e.jsx(N,{variant:"dashed",size:"extraSmall",color:"secondary",onClick:u,endIcon:e.jsx(K,{size:14}),children:"ADD"})})}),e.jsx(c,{children:"Id"}),e.jsx(c,{children:"Title"}),e.jsx(c,{}),e.jsx(c,{children:"State"}),e.jsx(c,{children:"Assigned To"}),e.jsx(c,{children:"Priority"}),e.jsx(c,{children:"Due Date"})]})}),e.jsxs(Te,{sx:{"& th,& td":{whiteSpace:"nowrap"},"& .MuiTableRow-root:last-of-type .MuiTable-root .MuiTableCell-root":{borderBottom:`1px solid ${s.palette.divider}`},"& .MuiTableRow-root:hover":{bgcolor:"transparent"}},children:[i==null?void 0:i.userStoryOrder.map((g,m)=>{const y=i==null?void 0:i.userStory.filter(b=>b.id===g)[0];return e.jsx(We,{story:y,index:m},y.id)}),x.placeholder]})]})})}),e.jsx(Ie,{open:t,handleDrawerOpen:a}),e.jsx(Je,{})]})})}export{Or as default};
