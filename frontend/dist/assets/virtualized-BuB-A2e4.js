import{j as e,r as b,y as S,M as F,a1 as B,S as U,B as Y,P as V,G as v}from"./index-BE75cmpZ.js";import{u as O,f as C,g as H,h as Z}from"./index-OdbGXu2K.js";import{u as Q}from"./index-yB1aAx2d.js";import{Q as ee,i as k,h as te,c as se,u as ae,a as re,b as oe,k as ie}from"./useBaseQuery-1_FwYxHN.js";import{S as I}from"./ScrollX-CyXoT44w.js";import{L}from"./LinearWithLabel-KVFg8Iwf.js";import{C as $,H as ne}from"./Filter-y71UMtT7.js";import{m as A}from"./react-table-Lij528qs.js";import{T as W,a as q,b as G}from"./TableContainer-s0yUIJEg.js";import{T as X}from"./TableHead-DpC64hQ0.js";import{T as y}from"./TableRow-D1lYbwwu.js";import{T as P}from"./TableCell-BOHhKnuh.js";import"./DocumentDownload-DDJvvIVF.js";import"./Slider-BUeMRvnO.js";import"./visuallyHidden-Dan1xhjv.js";import"./Send-DGO5bAte.js";import"./Pagination-BWXH2B2W.js";import"./index-ZtNy4ppB.js";import"./Checkbox-DNUoWgPJ.js";import"./Minus-YvqWlFLu.js";import"./mock-data-CjOvdTvj.js";import"./index-cq_cuLYi.js";var ce=class extends ee{constructor(t,i){super(t,i)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t,i){super.setOptions({...t,behavior:k()},i)}getOptimisticResult(t){return t.behavior=k(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,i){var r,x;const{state:n}=t,h=super.createResult(t,i),{isFetching:c,isRefetching:m,isError:o,isRefetchError:d}=h,u=(x=(r=n.fetchMeta)==null?void 0:r.fetchMore)==null?void 0:x.direction,j=o&&u==="forward",g=c&&u==="forward",f=o&&u==="backward",p=c&&u==="backward";return{...h,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:te(i,n.data),hasPreviousPage:se(i,n.data),isFetchNextPageError:j,isFetchingNextPage:g,isFetchPreviousPageError:f,isFetchingPreviousPage:p,isRefetchError:d&&!j&&!f,isRefetching:m&&!g&&!p}}};function le(t,i){return ae(t,ce)}const E=25,ue=new oe,me=(t,i,n)=>{const h=[...A(1e3)];if(n.length){const c=n[0],{id:m,desc:o}=c;h.sort((d,u)=>o?d[m]<u[m]?1:-1:d[m]>u[m]?1:-1)}return{data:h.slice(t,t+i),meta:{totalRowCount:h.length}}};function he(){var T,z,M,K;const t=b.useRef(null),[i,n]=b.useState([]),h=b.useMemo(()=>[{header:"First Name",accessorKey:"firstName"},{header:"Last Name",accessorKey:"lastName"},{header:"Email",accessorKey:"email"},{header:"Age",accessorKey:"age",meta:{className:"cell-right"}},{header:"Role",accessorKey:"role"},{header:"Visits",accessorKey:"visits",meta:{className:"cell-right"}},{header:"Status",accessorKey:"status",cell:s=>{switch(s.getValue()){case"Complicated":return e.jsx(S,{color:"error",label:"Complicated",size:"small",variant:"light"});case"Relationship":return e.jsx(S,{color:"success",label:"Relationship",size:"small",variant:"light"});case"Single":default:return e.jsx(S,{color:"info",label:"Single",size:"small",variant:"light"})}}},{header:"Profile Progress",accessorKey:"progress",cell:s=>e.jsx(L,{value:s.getValue(),sx:{minWidth:75}})}],[]),{data:c,fetchNextPage:m,isFetching:o}=le({queryKey:["table-data",i],queryFn:async({pageParam:s=0})=>{const a=s*E;return me(a,E,i)},initialPageParam:1,getNextPageParam:(s,a)=>a.length,placeholderData:ie,refetchOnWindowFocus:!1}),d=b.useMemo(()=>{var s;return((s=c==null?void 0:c.pages)==null?void 0:s.flatMap(a=>a.data))??[]},[c]),u=((z=(T=c==null?void 0:c.pages)==null?void 0:T[0])==null?void 0:z.meta.totalRowCount)??0,j=d.length,g=b.useCallback(s=>{if(s){const{scrollHeight:a,scrollTop:w,clientHeight:J}=s;a-w-J<300&&!o&&j<u&&m()}},[m,o,j,u]);b.useEffect(()=>{g(t.current)},[g]);const f=O({data:d,columns:h,state:{sorting:i},onSortingChange:n,getCoreRowModel:H(),getSortedRowModel:Z(),debugTable:!0}),{rows:p}=f.getRowModel(),l=Q({count:p.length,getScrollElement:()=>t.current,estimateSize:()=>34,overscan:10}),r=l.getVirtualItems(),x=l.getTotalSize(),R=r.length>0&&((M=r==null?void 0:r[0])==null?void 0:M.start)||0,D=r.length>0?x-(((K=r==null?void 0:r[r.length-1])==null?void 0:K.end)||0):0;let N=[];return f.getAllColumns().map(s=>N.push({label:typeof s.columnDef.header=="string"?s.columnDef.header:"#",key:s.columnDef.accessorKey})),e.jsx(F,{content:!1,title:"Virtualized Infinite Scroll",secondary:e.jsx($,{data:r.map(s=>p[s.index].original),headers:N,filename:"virtualized-ininite.csv"}),children:e.jsx(I,{children:e.jsx(W,{component:B,ref:t,onScroll:s=>g(s.target),sx:{height:544,overflow:"auto"},children:e.jsxs(q,{children:[e.jsx(X,{children:f.getHeaderGroups().map(s=>e.jsx(y,{children:s.headers.map(a=>(a.column.columnDef.meta!==void 0&&a.column.getCanSort()&&Object.assign(a.column.columnDef.meta,{className:a.column.columnDef.meta.className+" cursor-pointer prevent-select"}),e.jsx(P,{...a.column.columnDef.meta,onClick:a.column.getToggleSortingHandler(),...a.column.getCanSort()&&a.column.columnDef.meta===void 0&&{className:"cursor-pointer prevent-select"},children:a.isPlaceholder?null:e.jsxs(U,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Y,{children:C(a.column.columnDef.header,a.getContext())}),a.column.getCanSort()&&e.jsx(ne,{column:a.column})]})},a.id)))},s.id))}),e.jsxs(G,{children:[R>0&&e.jsx(y,{children:e.jsx(P,{sx:{height:`${R}px`,whiteSpace:"nowrap"}})}),r.map(s=>{const a=p[s.index];return e.jsx(y,{children:a.getVisibleCells().map(w=>e.jsx(P,{sx:{whiteSpace:"nowrap"},...w.column.columnDef.meta,children:C(w.column.columnDef.cell,w.getContext())},w.id))},a.id)}),D>0&&e.jsx(y,{children:e.jsx(P,{sx:{height:`${D}px`,whiteSpace:"nowrap"}})})]})]})})})})}function de(){return e.jsx(re,{client:ue,children:e.jsx(he,{})})}function _({columns:t,data:i}){var f,p;const n=O({data:i,columns:t,getCoreRowModel:H()}),h=b.useRef(null),{rows:c}=n.getRowModel(),m=Q({count:c.length,getScrollElement:()=>h.current,estimateSize:()=>34,overscan:10}),o=m.getVirtualItems(),d=m.getTotalSize(),u=o.length>0&&((f=o==null?void 0:o[0])==null?void 0:f.start)||0,j=o.length>0?d-(((p=o==null?void 0:o[o.length-1])==null?void 0:p.end)||0):0;let g=[];return n.getAllColumns().map(l=>g.push({label:typeof l.columnDef.header=="string"?l.columnDef.header:"#",key:l.columnDef.accessorKey})),e.jsx(F,{content:!1,title:"Virtualized Rows",secondary:e.jsx($,{data:o.map(l=>c[l.index].original),headers:g,filename:"virtualized-row.csv"}),children:e.jsx(I,{children:e.jsx(W,{component:B,ref:h,sx:{height:544,overflow:"auto"},children:e.jsxs(q,{children:[e.jsx(X,{className:"sticky-header",children:n.getHeaderGroups().map(l=>e.jsx(y,{children:l.headers.map(r=>e.jsx(P,{...r.column.columnDef.meta,children:r.isPlaceholder?null:C(r.column.columnDef.header,r.getContext())},r.id))},l.id))}),e.jsxs(G,{children:[u>0&&e.jsx(y,{children:e.jsx(P,{sx:{height:`${u}px`,whiteSpace:"nowrap"}})}),o.map(l=>{const r=c[l.index];return e.jsx(y,{children:r.getVisibleCells().map(x=>e.jsx(P,{sx:{whiteSpace:"nowrap"},...x.column.columnDef.meta,children:C(x.column.columnDef.cell,x.getContext())},x.id))},r.id)}),j>0&&e.jsx(y,{children:e.jsx(P,{sx:{height:`${j}px`,whiteSpace:"nowrap"}})})]})]})})})})}function ge(){const t=A(100),i=b.useMemo(()=>[{header:"First Name",accessorKey:"firstName"},{header:"Last Name",accessorKey:"lastName"},{header:"Email",accessorKey:"email"},{header:"Age",accessorKey:"age",meta:{className:"cell-right"}},{header:"Role",accessorKey:"role"},{header:"Visits",accessorKey:"visits",meta:{className:"cell-right"}},{header:"Status",accessorKey:"status",cell:n=>{switch(n.getValue()){case"Complicated":return e.jsx(S,{color:"error",label:"Complicated",size:"small",variant:"light"});case"Relationship":return e.jsx(S,{color:"success",label:"Relationship",size:"small",variant:"light"});case"Single":default:return e.jsx(S,{color:"info",label:"Single",size:"small",variant:"light"})}}},{header:"Profile Progress",accessorKey:"progress",cell:n=>e.jsx(L,{value:n.getValue(),sx:{minWidth:75}})}],[]);return e.jsx(_,{columns:i,data:t})}_.propTypes={columns:V.array,data:V.array};function Be(){return e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,children:e.jsx(de,{})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(ge,{})})]})}export{Be as default};
