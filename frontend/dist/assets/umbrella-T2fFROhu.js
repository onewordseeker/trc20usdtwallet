import{r as i,j as e,I as p,v as G,aC as E,bt as k,k as Y,ah as Z,ai as ee,d8 as te,S as C,e as M,E as ae,c as se,aj as oe,h as le,M as ne,a1 as re,aT as ie,B as S,F as ce,P as j}from"./index-BE75cmpZ.js";import{D as de,T as ge,H as me}from"./index-BAji7F66.js";import{s as ue,u as pe,f as h,i as xe,j as he,g as fe,e as Ce,h as je,a as be,b as Se,c as ye,d as Re}from"./index-OdbGXu2K.js";import{r as Te,c as Fe}from"./index-BLlYVWof.js";import{m as De}from"./react-table-Lij528qs.js";import{S as we}from"./ScrollX-CyXoT44w.js";import{E as Me}from"./ExpandingUserDetail-0xHBvJMY.js";import{I,D as Ie,f as ve,C as Ge,R as Ee,d as ke,H as Pe,F as Ve,c as ze,E as Ae,T as He,b as Ne}from"./Filter-y71UMtT7.js";import{S as Oe}from"./Send-DGO5bAte.js";import{T as Ke,a as Be,b as Le}from"./TableContainer-s0yUIJEg.js";import{T as v}from"./TableHead-DpC64hQ0.js";import{T as f}from"./TableRow-D1lYbwwu.js";import{T as d}from"./TableCell-BOHhKnuh.js";import{C as Ue}from"./Command-kWGiR8gt.js";import{T as $e}from"./TableFooter-vJEFjahE.js";import"./redux-2smOZOIh.js";import"./mock-data-CjOvdTvj.js";import"./index-cq_cuLYi.js";import"./react-number-format.es-oiMPPs--.js";import"./ListItem-eemVPKEi.js";import"./ListItemSecondaryAction-DuTfPZL3.js";import"./Sms-BWFwE_uP.js";import"./Call-DnYoIbjl.js";import"./Location-B1cc-luN.js";import"./DocumentDownload-DDJvvIVF.js";import"./LinearWithLabel-KVFg8Iwf.js";import"./Slider-BUeMRvnO.js";import"./visuallyHidden-Dan1xhjv.js";import"./Pagination-BWXH2B2W.js";import"./index-ZtNy4ppB.js";import"./Checkbox-DNUoWgPJ.js";import"./Minus-YvqWlFLu.js";const P=(r,l,s,o)=>{const g=Te(r.getValue(l),s);return o(g),g.passed},qe=(r,l,s)=>{let o=0;return r.columnFiltersMeta[s]&&(o=Fe(r.columnFiltersMeta[s],l.columnFiltersMeta[s])),o===0?ue.alphanumeric(r,l,s):o};function V({row:r,table:l}){var g;const s=(g=l==null?void 0:l.options)==null?void 0:g.meta,o=m=>{s==null||s.setSelectedRow(b=>({...b,[r.id]:!b[r.id]})),s==null||s.revertData(r.index,(m==null?void 0:m.currentTarget.name)==="cancel")};return e.jsxs(C,{direction:"row",spacing:1,alignItems:"center",children:[(s==null?void 0:s.selectedRow[r.id])&&e.jsx(M,{title:"Cancel",children:e.jsx(p,{color:"error",name:"cancel",onClick:o,children:e.jsx(k,{size:"15",variant:"Outline"})})}),e.jsx(M,{title:s!=null&&s.selectedRow[r.id]?"Save":"Edit",children:e.jsx(p,{color:s!=null&&s.selectedRow[r.id]?"success":"primary",onClick:o,children:s!=null&&s.selectedRow[r.id]?e.jsx(Oe,{size:"15",variant:"Bold"}):e.jsx(ae,{variant:"Outline"})})})]})}function z({defaultColumns:r,data:l,setData:s}){const o=se(),g=oe(o.breakpoints.down("sm")),[m,b]=i.useState({}),[A,H]=i.useState([]),[y,R]=i.useState(""),[N,O]=i.useState([]),[K,B]=i.useState([]),[L,U]=i.useState(()=>[...l]),[$,q]=i.useState({}),[T]=i.useState(()=>[...r]),[Q,X]=i.useState(T.map(a=>a.id)),_=(a,t)=>{l.splice(t,0,l.splice(a,1)[0]),s([...l])},[J,F]=i.useState({}),n=pe({data:l,columns:T,defaultColumn:{cell:Ne},state:{rowSelection:m,columnFilters:A,globalFilter:y,sorting:N,grouping:K,columnOrder:Q,columnVisibility:J},enableRowSelection:!0,onRowSelectionChange:b,onSortingChange:O,onGroupingChange:B,onColumnFiltersChange:H,onGlobalFilterChange:R,onColumnOrderChange:X,onColumnVisibilityChange:F,getRowCanExpand:()=>!0,getExpandedRowModel:xe(),getGroupedRowModel:he(),getCoreRowModel:fe(),getPaginationRowModel:Ce(),getSortedRowModel:je(),getFilteredRowModel:be(),getFacetedRowModel:Se(),getFacetedUniqueValues:ye(),getFacetedMinMaxValues:Re(),globalFilterFn:P,getRowId:a=>a.id.toString(),debugTable:!0,debugHeaders:!0,debugColumns:!0,meta:{selectedRow:$,setSelectedRow:q,revertData:(a,t)=>{t?s(c=>c.map((u,x)=>x===a?L[a]:u)):U(c=>c.map((u,x)=>x===a?l[a]:u))},updateData:(a,t,c)=>{s(u=>u.map((x,W)=>W===a?{...u[a],[t]:c}:x))}}});i.useEffect(()=>F({id:!1,role:!1,contact:!1,country:!1,progress:!1}),[]);const D=le(o.palette.primary.lighter,.1);let w=[];return n.getVisibleLeafColumns().map(a=>a.columnDef.accessorKey&&w.push({label:typeof a.columnDef.header=="string"?a.columnDef.header:"#",key:a.columnDef.accessorKey})),e.jsxs(ne,{content:!1,children:[e.jsxs(C,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",sx:{padding:2,...g&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(Ie,{value:y??"",onFilterChange:a=>R(String(a)),placeholder:`Search ${l.length} records...`}),e.jsxs(C,{direction:"row",spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:[e.jsx(ve,{getVisibleLeafColumns:n.getVisibleLeafColumns,getIsAllColumnsVisible:n.getIsAllColumnsVisible,getToggleAllColumnsVisibilityHandler:n.getToggleAllColumnsVisibilityHandler,getAllColumns:n.getAllColumns}),e.jsx(Ge,{data:n.getSelectedRowModel().flatRows.map(a=>a.original).length===0?l:n.getSelectedRowModel().flatRows.map(a=>a.original),headers:w,filename:"umbrella.csv"})]})]}),e.jsxs(we,{children:[e.jsx(Ee,{selected:Object.keys(m).length}),e.jsx(Ke,{component:re,children:e.jsxs(Be,{children:[e.jsx(v,{children:n.getHeaderGroups().map(a=>e.jsxs(f,{children:[e.jsx(d,{}),a.headers.map(t=>(t.column.columnDef.meta!==void 0&&t.column.getCanSort()&&Object.assign(t.column.columnDef.meta,{className:t.column.columnDef.meta.className+" cursor-pointer prevent-select"}),e.jsx(ke,{header:t,table:n,children:e.jsx(e.Fragment,{children:t.isPlaceholder?null:e.jsxs(C,{direction:"row",spacing:1,alignItems:"center",children:[t.column.getCanGroup()&&e.jsx(p,{color:t.column.getIsGrouped()?"error":"primary",onClick:t.column.getToggleGroupingHandler(),size:"small",sx:{p:0,width:24,height:24,fontSize:"1rem",mr:.75},children:t.column.getIsGrouped()?e.jsx(Ue,{size:"32",color:"#FF8A65",variant:"Bold"}):e.jsx(ie,{size:"32",variant:"Outline"})}),e.jsx(S,{children:h(t.column.columnDef.header,t.getContext())}),t.column.getCanSort()&&e.jsx(Pe,{column:t.column,sort:!0})]})})},t.id)))]},a.id))}),e.jsx(v,{children:n.getHeaderGroups().map(a=>e.jsxs(f,{children:[e.jsx(d,{}),a.headers.map(t=>e.jsx(d,{...t.column.columnDef.meta,children:t.column.getCanFilter()&&e.jsx(Ve,{column:t.column,table:n})},t.id))]},a.id))}),e.jsx(Le,{children:n.getRowModel().rows.length>0?n.getRowModel().rows.map(a=>e.jsxs(i.Fragment,{children:[e.jsx(ze,{row:a,reorderRow:_,children:e.jsx(e.Fragment,{children:a.getVisibleCells().map(t=>{let c="background.paper";return t.getIsGrouped()&&(c="primary.lighter"),t.getIsAggregated()&&(c="warning.lighter"),t.getIsPlaceholder()&&(c="error.lighter"),t.column.columnDef.meta!==void 0&&t.column.getCanSort()&&Object.assign(t.column.columnDef.meta,{style:{backgroundColor:c}}),e.jsx(d,{...t.column.columnDef.meta,sx:{bgcolor:c},...t.getIsGrouped()&&t.column.columnDef.meta===void 0&&{style:{backgroundColor:c}},children:t.getIsGrouped()?e.jsxs(C,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(p,{color:"secondary",onClick:a.getToggleExpandedHandler(),size:"small",sx:{p:0,width:24,height:24},children:a.getIsExpanded()?e.jsx(G,{size:"32",variant:"Outline"}):e.jsx(E,{size:"32",variant:"Outline"})}),e.jsx(S,{children:h(t.column.columnDef.cell,t.getContext())})," ",e.jsxs(S,{children:["(",a.subRows.length,")"]})]}):t.getIsAggregated()?h(t.column.columnDef.aggregatedCell??t.column.columnDef.cell,t.getContext()):t.getIsPlaceholder()?null:h(t.column.columnDef.cell,t.getContext())},t.id)})})}),a.getIsExpanded()&&!a.getIsGrouped()&&e.jsx(f,{sx:{bgcolor:D,"&:hover":{bgcolor:`${D} !important`}},children:e.jsx(d,{colSpan:a.getVisibleCells().length+2,children:e.jsx(Me,{data:a.original})})})]},a.id)):e.jsx(f,{children:e.jsx(d,{colSpan:n.getAllColumns().length,children:e.jsx(Ae,{msg:"No Data"})})})}),e.jsx($e,{children:n.getFooterGroups().map(a=>e.jsxs(f,{children:[e.jsx(d,{}),a.headers.map(t=>e.jsx(d,{...t.column.columnDef.meta,children:t.isPlaceholder?null:h(t.column.columnDef.header,t.getContext())},t.id))]},a.id))})]})}),e.jsx(ce,{}),e.jsx(S,{sx:{p:2},children:e.jsx(He,{setPageSize:n.setPageSize,setPageIndex:n.setPageIndex,getState:n.getState,getPageCount:n.getPageCount})})]})]})}function Ft(){const[r,l]=i.useState(()=>De(20)),s=i.useMemo(()=>[{id:"expander",enableGrouping:!1,header:()=>null,cell:({row:o})=>o.getCanExpand()?e.jsx(p,{color:o.getIsExpanded()?"primary":"secondary",onClick:o.getToggleExpandedHandler(),size:"small",children:o.getIsExpanded()?e.jsx(G,{size:"32",variant:"Outline"}):e.jsx(E,{size:"32",variant:"Outline"})}):e.jsx(p,{color:"secondary",size:"small",disabled:!0,children:e.jsx(k,{})})},{id:"select",enableGrouping:!1,header:({table:o})=>e.jsx(I,{checked:o.getIsAllRowsSelected(),indeterminate:o.getIsSomeRowsSelected(),onChange:o.getToggleAllRowsSelectedHandler()}),cell:({row:o})=>e.jsx(I,{checked:o.getIsSelected(),disabled:!o.getCanSelect(),indeterminate:o.getIsSomeSelected(),onChange:o.getToggleSelectedHandler()})},{id:"id",title:"Id",header:"#",accessorKey:"id",dataType:"text",enableColumnFilter:!1,enableGrouping:!1,meta:{className:"cell-center"}},{id:"avatar",header:"Avatar",accessorKey:"avatar",enableColumnFilter:!1,enableGrouping:!1,cell:o=>e.jsx(Y,{alt:"Avatar 1",size:"sm",src:Z(`avatar-${o.getValue()}.png`,ee.USERS)}),meta:{className:"cell-center"}},{id:"firstName",header:"First Name",footer:"First Name",accessorKey:"firstName",dataType:"text",enableGrouping:!1},{id:"lastName",header:"Last Name",footer:"Last Name",accessorKey:"lastName",dataType:"text",enableGrouping:!1},{id:"email",header:"Email",footer:"Email",accessorKey:"email",dataType:"text",enableGrouping:!1},{id:"age",header:"Age",footer:"Age",accessorKey:"age",dataType:"text",meta:{className:"cell-right"}},{id:"role",header:"Role",footer:"Role",accessorKey:"role",dataType:"text",enableGrouping:!1,filterFn:P,sortingFn:qe},{id:"contact",header:"Contact",footer:"Contact",accessorKey:"contact",dataType:"text",enableGrouping:!1},{id:"country",header:"Country",footer:"Country",accessorKey:"country",dataType:"text",enableGrouping:!1},{id:"visits",header:"Visits",footer:"Visits",accessorKey:"visits",dataType:"text",enableGrouping:!1,meta:{className:"cell-right"}},{id:"status",header:"Status",footer:"Status",accessorKey:"status",dataType:"select"},{id:"progress",header:"Profile Progress",footer:"Profile Progress",accessorKey:"progress",dataType:"progress",enableGrouping:!1},{id:"edit",header:"Actions",cell:V,enableGrouping:!1,meta:{className:"cell-center"}}],[]);return e.jsx(de,{backend:te?ge:me,children:e.jsx(z,{data:r,defaultColumns:s,setData:l})})}V.propTypes={row:j.object,table:j.object};z.propTypes={defaultColumns:j.array,data:j.array,setData:j.any};export{Ft as default,P as fuzzyFilter,qe as fuzzySort};
