import{bp as B,a7 as I,r as l,j as s,bq as A,aW as C,aX as x,aP as F,G as a,S as f,J as j,X as g,I as R,b4 as u,U as k,B as q,T as W,A as T,d as D}from"./index-BE75cmpZ.js";import{u as L}from"./useScriptRef-IHXzUKmT.js";import{s as z,a as G}from"./password-strength-_dbWWfI_.js";import{I as M}from"./InputAdornment-CY-Tyt4a.js";import{E as V}from"./Eye-BRgheOyE.js";import{E as X}from"./EyeSlash-CGe2uNp7.js";function K(){const m=L(),P=B(),{isLoggedIn:b}=I(),[o,y]=l.useState(),[c,S]=l.useState(!1),v=()=>{S(!c)},E=r=>{r.preventDefault()},p=r=>{const e=z(r);y(G(e))};return l.useEffect(()=>{p("")},[]),s.jsx(s.Fragment,{children:s.jsx(A,{initialValues:{password:"",confirmPassword:"",submit:null},validationSchema:C().shape({password:x().max(255).required("Password is required"),confirmPassword:x().required("Confirm Password is required").test("confirmPassword","Both Password must be match!",(r,e)=>e.parent.password===r)}),onSubmit:async(r,{setErrors:e,setStatus:t,setSubmitting:n})=>{try{m.current&&(t({success:!0}),n(!1),F({open:!0,message:"Successfuly reset password.",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{P(b?"/auth/login":"/login",{replace:!0})},1500))}catch(i){console.error(i),m.current&&(t({success:!1}),e({submit:i.message}),n(!1))}},children:({errors:r,handleBlur:e,handleChange:t,handleSubmit:n,isSubmitting:i,touched:d,values:h})=>s.jsx("form",{noValidate:!0,onSubmit:n,children:s.jsxs(a,{container:!0,spacing:3,children:[s.jsxs(a,{item:!0,xs:12,children:[s.jsxs(f,{spacing:1,children:[s.jsx(j,{htmlFor:"password-reset",children:"Password"}),s.jsx(g,{fullWidth:!0,error:!!(d.password&&r.password),id:"password-reset",type:c?"text":"password",value:h.password,name:"password",onBlur:e,onChange:w=>{t(w),p(w.target.value)},endAdornment:s.jsx(M,{position:"end",children:s.jsx(R,{"aria-label":"toggle password visibility",onClick:v,onMouseDown:E,edge:"end",color:"secondary",children:c?s.jsx(V,{}):s.jsx(X,{})})}),placeholder:"Enter password"})]}),d.password&&r.password&&s.jsx(u,{error:!0,id:"helper-text-password-reset",children:r.password}),s.jsx(k,{fullWidth:!0,sx:{mt:2},children:s.jsxs(a,{container:!0,spacing:2,alignItems:"center",children:[s.jsx(a,{item:!0,children:s.jsx(q,{sx:{bgcolor:o==null?void 0:o.color,width:85,height:8,borderRadius:"7px"}})}),s.jsx(a,{item:!0,children:s.jsx(W,{variant:"subtitle1",fontSize:"0.75rem",children:o==null?void 0:o.label})})]})})]}),s.jsxs(a,{item:!0,xs:12,children:[s.jsxs(f,{spacing:1,children:[s.jsx(j,{htmlFor:"confirm-password-reset",children:"Confirm Password"}),s.jsx(g,{fullWidth:!0,error:!!(d.confirmPassword&&r.confirmPassword),id:"confirm-password-reset",type:"password",value:h.confirmPassword,name:"confirmPassword",onBlur:e,onChange:t,placeholder:"Enter confirm password"})]}),d.confirmPassword&&r.confirmPassword&&s.jsx(u,{error:!0,id:"helper-text-confirm-password-reset",children:r.confirmPassword})]}),r.submit&&s.jsx(a,{item:!0,xs:12,children:s.jsx(u,{error:!0,children:r.submit})}),s.jsx(a,{item:!0,xs:12,children:s.jsx(T,{children:s.jsx(D,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Reset Password"})})})]})})})})}export{K as A};
