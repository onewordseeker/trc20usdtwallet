import{r as h,bp as S,a7 as I,j as e,bq as L,aW as A,aX as x,G as a,S as d,J as g,X as w,b4 as c,I as F,aq as q,T as B,f as T,L as W,A as D,d as M,P as R}from"./index-BE75cmpZ.js";import{u as $}from"./useScriptRef-IHXzUKmT.js";import{I as z}from"./InputAdornment-CY-Tyt4a.js";import{E as G}from"./Eye-BRgheOyE.js";import{E as U}from"./EyeSlash-CGe2uNp7.js";import{C as V}from"./Checkbox-DNUoWgPJ.js";function X({forgot:m}){const[j,f]=h.useState(!1),b=S(),{isLoggedIn:y,login:k}=I(),p=$(),[l,E]=h.useState(!1),v=()=>{E(!l)},C=s=>{s.preventDefault()};return e.jsx(e.Fragment,{children:e.jsx(L,{initialValues:{email:"",password:"",submit:null},validationSchema:A().shape({email:x().email("Must be a valid email").max(255).required("Username/Email is required"),password:x().max(255).required("Password is required")}),onSubmit:async(s,{setErrors:o,setStatus:r,setSubmitting:t})=>{try{await k(s.email,s.password)&&b("/code-verification",{state:{email:s.email,password:s.password}}),p.current&&(r({success:!0}),t(!1))}catch(i){console.error(i),p.current&&(r({success:!1}),o({submit:i.message}),t(!1))}},children:({errors:s,handleBlur:o,handleChange:r,handleSubmit:t,isSubmitting:i,touched:n,values:u})=>e.jsx("form",{noValidate:!0,onSubmit:t,children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsxs(a,{item:!0,xs:12,children:[e.jsxs(d,{spacing:1,children:[e.jsx(g,{htmlFor:"email-login",children:"Username/Email"}),e.jsx(w,{id:"email-login",type:"email",value:u.email,name:"email",onBlur:o,onChange:r,placeholder:"eg: kabboliate@gmail.com",fullWidth:!0,error:!!(n.email&&s.email)})]}),n.email&&s.email&&e.jsx(c,{error:!0,id:"standard-weight-helper-text-email-login",children:s.email})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsxs(d,{spacing:1,children:[e.jsx(g,{htmlFor:"password-login",children:"Password"}),e.jsx(w,{fullWidth:!0,error:!!(n.password&&s.password),id:"-password-login",type:l?"text":"password",value:u.password,name:"password",onBlur:o,onChange:r,endAdornment:e.jsx(z,{position:"end",children:e.jsx(F,{"aria-label":"toggle password visibility",onClick:v,onMouseDown:C,edge:"end",color:"secondary",children:l?e.jsx(G,{}):e.jsx(U,{})})}),placeholder:"Enter password"})]}),n.password&&s.password&&e.jsx(c,{error:!0,id:"standard-weight-helper-text-password-login",children:s.password})]}),e.jsx(a,{item:!0,xs:12,sx:{mt:-1},children:e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e.jsx(q,{control:e.jsx(V,{checked:j,onChange:P=>f(P.target.checked),name:"checked",color:"primary",size:"small"}),label:e.jsx(B,{variant:"h6",children:"Keep me sign in"})}),e.jsx(T,{variant:"h6",component:W,to:y&&m?m:"/forgot-password",color:"text.primary",children:"Forgot Password?"})]})}),s.submit&&e.jsx(a,{item:!0,xs:12,children:e.jsx(c,{error:!0,children:s.submit})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(D,{children:e.jsx(M,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Login"})})})]})})})})}X.propTypes={forgot:R.string};export{X as A};
