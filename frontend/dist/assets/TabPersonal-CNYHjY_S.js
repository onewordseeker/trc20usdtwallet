import{a7 as I,r as h,j as e,M as P,bq as C,aW as E,aX as j,aP as g,B as m,G as t,S as c,J as u,n as b,b4 as d,y as O,d as F,bI as T}from"./index-BE75cmpZ.js";import{c as q}from"./Users-4Bn6yUGa.js";function A(){return T()}function w(){const{logout:M,user:a}=I();h.useEffect(()=>{console.log(JSON.parse(a==null?void 0:a.permissions))},[]);const p=new Date;p.setFullYear(p.getFullYear()-18);const y=A(),[S,N]=h.useState(["Transfer All funds","Transfer one by one","Wallets Management","Users Management","Transactions","Activity Logs"]);return e.jsx(P,{content:!1,title:"Personal Information",sx:{"& .MuiInputLabel-root":{fontSize:"0.875rem"}},children:e.jsx(C,{initialValues:{fullname:a==null?void 0:a.fullname,email:a==null?void 0:a.email,submit:null},validationSchema:E().shape({fullname:j().max(255).required("Full Name is required."),email:j().email("Invalid email address.").max(255).required("Email is required.")}),onSubmit:async(s,{setErrors:i,setStatus:n,setSubmitting:r})=>{try{let l={fullname:s.fullname,email:s.email};await q(l),g({open:!0,message:"Personal profile updated successfully.",variant:"alert",alert:{color:"success"}}),n({success:!1}),r(!1)}catch(l){g({open:!0,message:l.message,variant:"alert",alert:{color:"error"}}),n({success:!1}),i({submit:l.message}),r(!1)}},children:({errors:s,handleBlur:i,handleChange:n,handleSubmit:r,isSubmitting:l,setFieldValue:k,touched:o,values:x})=>e.jsxs("form",{noValidate:!0,onSubmit:r,children:[e.jsx(m,{sx:{p:2.5},children:e.jsxs(t,{container:!0,spacing:3,children:[e.jsxs(t,{item:!0,xs:12,sm:6,children:[e.jsxs(c,{spacing:1,children:[e.jsx(u,{htmlFor:"personal-first-name",children:"Full Name"}),e.jsx(b,{fullWidth:!0,id:"personal-first-name",value:x.fullname,name:"fullname",onBlur:i,onChange:n,placeholder:"Full Name",autoFocus:!0,inputRef:y})]}),o.fullname&&s.fullname&&e.jsx(d,{error:!0,id:"personal-first-name-helper",children:s.fullname})]}),e.jsxs(t,{item:!0,xs:12,sm:6,children:[e.jsxs(c,{spacing:1,children:[e.jsx(u,{htmlFor:"personal-email",children:"Email Address"}),e.jsx(b,{type:"email",fullWidth:!0,value:x.email,name:"email",onBlur:i,onChange:n,id:"personal-email",placeholder:"Email Address"})]}),o.email&&s.email&&e.jsx(d,{error:!0,id:"personal-email-helper",children:s.email})]}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsxs(m,{spacing:1,children:[e.jsx(u,{htmlFor:"personal-email",children:"Permissions"}),S.map((f,v)=>{if(JSON.parse(a==null?void 0:a.permissions)[v]=="1")return e.jsx(O,{label:f,sx:{fontSize:"9px",margin:"5px"},size:"small",variant:"outlined",color:"primary"},f)})]})})]})}),e.jsxs(m,{sx:{p:2.5},children:[o.note&&s.note&&e.jsx(d,{error:!0,id:"personal-note-helper",children:s.note}),e.jsxs(c,{direction:"row",justifyContent:"flex-end",alignItems:"center",spacing:2,sx:{mt:2.5},children:[e.jsx(F,{variant:"outlined",color:"secondary",children:"Cancel"}),e.jsx(F,{disabled:l||Object.keys(s).length!==0,type:"submit",variant:"contained",children:"Save"})]})]})]})})})}export{w as default};
